ドメインごとにDB設計を見直すときは、単に性能改善だけではなく、
**データ構造・利用パターン・運用要件**まで含めて洗い出すことが重要です。
MySQL/PostgreSQLを前提に、確認すべき主要ポイントを整理します。

---

## **1. ビジネス要件・利用パターンの再確認**

* そのドメイン（機能）が**どのようなデータを持ち、どの頻度で更新/参照されるか**を把握
* 参照が多いのか、書き込みが多いのか
* 集計や検索の条件は固定的か、動的に変わるのか
* 将来のデータ増加予測（1年後・3年後の件数）

---

## **2. 正規化と非正規化のバランス**

* **正規化**

  * 冗長性を排除して整合性を保つ
  * 更新系が多いシステムでは重要
* **非正規化**

  * JOIN回数削減や集計性能向上のために冗長データを持つ
  * レポート・分析系やキャッシュテーブルで活用
* ドメインごとに**トランザクション系（OLTP）か分析系（OLAP）か**を切り分けて設計

---

## **3. インデックス戦略**

* 主キー・外部キーの設定（MySQL: InnoDBのクラスタ化主キー、PostgreSQL: 任意指定）
* 複合インデックスの順序をクエリ利用順に合わせる
* 部分インデックス（PostgreSQL）や関数インデックスの活用
* 不要インデックスの整理（更新系の性能悪化防止）

---

## **4. パーティショニングやアーカイブ**

* データの寿命・アクセス頻度を考慮し、古いデータをアーカイブ
* 時系列データはパーティション分割

  * MySQL: RANGEパーティション
  * PostgreSQL: ネイティブパーティショニング
* アーカイブ先を別DBやストレージに分離して本番負荷軽減

---

## **5. クエリの最適化**

* 実行計画（`EXPLAIN`/`EXPLAIN ANALYZE`）の確認
* SELECT \*禁止 → 必要カラムのみ
* ページネーションの見直し（OFFSET→seek method）
* JOINを減らす or 集約テーブル化

---

## **6. スキーマ変更のしやすさ**

* 将来の追加項目を見越して型やNULL可否を設計
* ENUM型よりマスタテーブル参照を優先（柔軟性確保）
* 大規模テーブルのALTERを安全に行う仕組み（オンラインDDL、分割マイグレーション）

---

## **7. 運用監視・メンテナンス性**

* 監視項目（クエリ遅延、接続数、ロック競合、ストレージ使用量）
* VACUUM（PostgreSQL）、ANALYZEの自動化
* バックアップとリストアの手順確認
* 障害時のリカバリ時間（RTO）・データ損失許容度（RPO）

---

## **8. セキュリティとアクセス権限**

* ドメイン単位でDBユーザ・権限を分離
* SQLインジェクション対策（プリペアドステートメント）
* 個人情報や機密データの暗号化（カラム単位/ディスク暗号化）

---


表形式＋優先度付きで作れます。
そうすると、各ドメインのレビュー会議でそのまま使えるフォーマットになります。
