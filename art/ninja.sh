#!/bin/bash
#=========================================================

# ã†ãšã¾ããƒŠãƒ«ãƒˆå¤‰åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ”¹è‰¯ç‰ˆï¼‰

# èª¬æ˜: ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã†ãšã¾ããƒŠãƒ«ãƒˆã®ã•ã¾ã–ã¾ãªå½¢æ…‹ã‚’ASCIIã‚¢ãƒ¼ãƒˆã§è¡¨ç¤ºã—ã¾ã™

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0

# ä½œæˆè€…: Claude

#=========================================================

# ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰å³çµ‚äº†

set -euo pipefail

#=========================================================

# å®šæ•°å®šç¾©

#=========================================================
readonly SCRIPT_NAME=â€$(basename â€œ$0â€)â€
readonly VERSION=â€œ2.0â€
readonly MIN_DELAY=1
readonly MAX_DELAY=10

#=========================================================

# è‰²å®šç¾©

#=========================================================
readonly COLOR_RESET=â€™\033[0mâ€™
readonly COLOR_RED=â€™\033[31mâ€™
readonly COLOR_GREEN=â€™\033[32mâ€™
readonly COLOR_YELLOW=â€™\033[33mâ€™
readonly COLOR_BLUE=â€™\033[34mâ€™
readonly COLOR_MAGENTA=â€™\033[35mâ€™
readonly COLOR_CYAN=â€™\033[36mâ€™
readonly COLOR_WHITE=â€™\033[37mâ€™
readonly COLOR_BOLD=â€™\033[1mâ€™

#=========================================================

# ãƒ­ã‚°é–¢æ•°

#=========================================================
log_info() {
echo -e â€œ${COLOR_CYAN}[INFO]${COLOR_RESET} $*â€ >&2
}

log_error() {
echo -e â€œ${COLOR_RED}[ERROR]${COLOR_RESET} $*â€ >&2
}

log_success() {
echo -e â€œ${COLOR_GREEN}[SUCCESS]${COLOR_RESET} $*â€ >&2
}

#=========================================================

# ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºé–¢æ•°

#=========================================================
show_help() {
cat << EOF
${COLOR_BOLD}ã†ãšã¾ããƒŠãƒ«ãƒˆå¤‰åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ v${VERSION}${COLOR_RESET}

${COLOR_YELLOW}ä½¿ç”¨æ–¹æ³•:${COLOR_RESET}
$SCRIPT_NAME [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]

${COLOR_YELLOW}ã‚ªãƒ—ã‚·ãƒ§ãƒ³:${COLOR_RESET}
-n, â€“normal       é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤º
-c, â€“chakra       ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤º
-k, â€“kyuubi       ä¹å°¾ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤º
-a, â€“all          å…¨ã¦ã®ãƒ¢ãƒ¼ãƒ‰ã‚’é †ç•ªã«è¡¨ç¤ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
-r, â€“repeat N     æŒ‡å®šã—ãŸå›æ•°ã ã‘ç¹°ã‚Šè¿”ã—è¡¨ç¤ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
-d, â€“delay N      è¡¨ç¤ºé–“éš”ã‚’æŒ‡å®šï¼ˆç§’æ•°ã€${MIN_DELAY}-${MAX_DELAY}ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2ï¼‰
-s, â€“silent       ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ãªã„ï¼ˆé™ã‹ãƒ¢ãƒ¼ãƒ‰ï¼‰
-V, â€“version      ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’è¡¨ç¤º
-h, â€“help         ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º

${COLOR_YELLOW}ä¾‹:${COLOR_RESET}
$SCRIPT_NAME                    # å…¨ãƒ¢ãƒ¼ãƒ‰ã‚’1å›è¡¨ç¤º
$SCRIPT_NAME -n                 # é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®ã¿è¡¨ç¤º
$SCRIPT_NAME -a -r 3 -d 1       # å…¨ãƒ¢ãƒ¼ãƒ‰ã‚’3å›ç¹°ã‚Šè¿”ã—ã€1ç§’é–“éš”
$SCRIPT_NAME -k -s              # ä¹å°¾ãƒ¢ãƒ¼ãƒ‰ã‚’é™ã‹ã«è¡¨ç¤º

EOF
}

#=========================================================

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤º

#=========================================================
show_version() {
echo â€œ${SCRIPT_NAME} version ${VERSION}â€
}

#=========================================================

# ç«¯æœ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯

#=========================================================
check_terminal_size() {
local min_cols=80
local min_rows=25
local cols rows

```
if command -v tput >/dev/null 2>&1; then
    cols=$(tput cols 2>/dev/null || echo 80)
    rows=$(tput lines 2>/dev/null || echo 25)
    
    if [[ $cols -lt $min_cols ]] || [[ $rows -lt $min_rows ]]; then
        log_error "ç«¯æœ«ã‚µã‚¤ã‚ºãŒå°ã•ã™ãã¾ã™ï¼ˆæœ€å°: ${min_cols}x${min_rows}ã€ç¾åœ¨: ${cols}x${rows}ï¼‰"
        log_error "ç«¯æœ«ã‚’å¤§ããã™ã‚‹ã‹ã€ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦ãã ã•ã„"
        return 1
    fi
fi
return 0
```

}

#=========================================================

# ç”»é¢ã‚¯ãƒªã‚¢é–¢æ•°

#=========================================================
clear_screen() {
if [[ â€œ${SILENT:-false}â€ != â€œtrueâ€ ]]; then
clear
fi
}

#=========================================================

# å¾…æ©Ÿé–¢æ•°

#=========================================================
wait_with_animation() {
local delay=$1
local message=${2:-â€â€}

```
if [[ "${SILENT:-false}" == "true" ]]; then
    sleep "$delay"
    return
fi

if [[ -n "$message" ]]; then
    echo -e "${COLOR_MAGENTA}$message${COLOR_RESET}"
fi

# ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãå¾…æ©Ÿ
local spinner='â ‹â ™â ¹â ¸â ¼â ´â ¦â §â ‡â '
local i=0
while [[ $i -lt $delay ]]; do
    for ((j=0; j<10; j++)); do
        printf "\r${COLOR_CYAN}å¾…æ©Ÿä¸­... ${spinner:j:1}${COLOR_RESET}"
        sleep 0.1
        ((i++))
        if [[ $i -ge $delay ]]; then
            break
        fi
    done
done
printf "\r                    \r"
```

}

#=========================================================

# ãƒŠãƒ«ãƒˆæç”»é–¢æ•°

#=========================================================

# ãƒŠãƒ«ãƒˆï¼ˆé€šå¸¸ãƒ¢ãƒ¼ãƒ‰ï¼‰ã‚’æç”»ã™ã‚‹é–¢æ•°

draw_naruto() {
[[ â€œ${SILENT:-false}â€ != â€œtrueâ€ ]] && echo -e â€œ${COLOR_YELLOW}${COLOR_BOLD}é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™â€¦${COLOR_RESET}â€
cat << â€œEOFâ€
â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–€â–„â–„â–„â–„â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–„â–„â–„â–€â–ˆâ–ˆ
â–ˆâ–ˆ â–‘â–‘â–’â–’â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–’â–’â–‘â–‘ â–ˆâ–ˆ
â–ˆâ–ˆ  â–’â–ˆâ–ˆâ–’ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’â–ˆâ–ˆâ–’  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â—•â–ˆâ—•â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â—•â–ˆâ—•â–‘  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â–‘â–’â–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–‘â–‘â–’â–‘â–‘  â–ˆâ–ˆ
â–ˆâ–ˆâ–„â–„â–“â–“â–’â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–’â–“â–“â–„â–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–€â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–ˆâ–€ â–„â–„â–ˆâ–ˆâ–ˆâ–„â–„ â–€â–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆ
â–€â–ˆâ–ˆâ–’â–’â–ˆ  â–€â–€â–ˆâ–ˆâ–ˆâ–€â–€  â–ˆâ–’â–’â–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–„â–„ â–‘â–’â–ˆâ–ˆâ–ˆâ–’â–‘ â–„â–„â–ˆâ–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–€
â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€
â–€â–€â–€â–€â–€

```
          ğŸœ ãƒŠãƒ«ãƒˆãƒ»ã†ãšã¾ã ğŸœ
```

EOF
}

# ã†ãšã¾ããƒŠãƒ«ãƒˆã®ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æç”»ã™ã‚‹é–¢æ•°

draw_naruto_chakra_mode() {
[[ â€œ${SILENT:-false}â€ != â€œtrueâ€ ]] && echo -e â€œ${COLOR_BLUE}${COLOR_BOLD}ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™â€¦${COLOR_RESET}â€
cat << â€œEOFâ€
â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–ˆâ–ˆâ–ˆâ–ˆâ€»â€»â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ€»â€»â–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–€â–„â–„â–„â–„â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–„â–„â–„â–€â–ˆâ–ˆ
â–ˆâ–ˆ â–‘â–‘âŠ¹âŠ¹â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘âŠ¹âŠ¹â–‘â–‘ â–ˆâ–ˆ
â–ˆâ–ˆ  â–’â–ˆâ–ˆâ–’ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’â–ˆâ–ˆâ–’  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â—•â–ˆâ—•â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â—•â–ˆâ—•â–‘  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â–‘âˆ´â–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–‘â–‘âˆ´â–‘â–‘  â–ˆâ–ˆ
â–ˆâ–ˆâ–„â–„âŠ¹âŠ¹â–’â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–’âŠ¹âŠ¹â–„â–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–€â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–ˆâ–€ âˆ´âˆ´â–ˆâ–ˆâ–ˆâˆ´âˆ´ â–€â–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆ
â–€â–ˆâ–ˆâ–’â–’â–ˆ  â–€â–€â–ˆâ–ˆâ–ˆâ–€â–€  â–ˆâ–’â–’â–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–„â–„ â–‘â–’â–ˆâ–ˆâ–ˆâ–’â–‘ â–„â–„â–ˆâ–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–€
â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€
â–€â–€â–€â–€â–€

```
       âš¡ ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ç™ºå‹•ï¼ âš¡
```

EOF
}

# ä¹å°¾ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æç”»ã™ã‚‹é–¢æ•°

draw_naruto_kyuubi_mode() {
[[ â€œ${SILENT:-false}â€ != â€œtrueâ€ ]] && echo -e â€œ${COLOR_RED}${COLOR_BOLD}ä¹å°¾ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ã®ãƒŠãƒ«ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™â€¦${COLOR_RESET}â€
cat << â€œEOFâ€
â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„
â–ˆâ–ˆâ–ˆâ–ˆâ‚â‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ‚â‚â–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–€â–„â–„â–„â–„â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–„â–„â–„â–€â–ˆâ–ˆ
â–ˆâ–ˆ â–‘â–‘âœ§âœ§â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘âœ§âœ§â–‘â–‘ â–ˆâ–ˆ
â–ˆâ–ˆ  â–’â–ˆâ–ˆâ–’ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’â–ˆâ–ˆâ–’  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â‚â–ˆâ‚â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â‚â–ˆâ‚â–‘  â–ˆâ–ˆ
â–ˆâ–ˆ  â–‘â–‘âœºâ–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–‘â–‘âœºâ–‘â–‘  â–ˆâ–ˆ
â–ˆâ–ˆâ–„â–„âœ§âœ§â–’â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–’âœ§âœ§â–„â–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–€â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–ˆâ–€ âœºâœºâ–ˆâ–ˆâ–ˆâœºâœº â–€â–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆ
â–€â–ˆâ–ˆâ–’â–’â–ˆ  â–€â–€â–ˆâ–ˆâ–ˆâ–€â–€  â–ˆâ–’â–’â–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–„â–„ â–‘â–’â–ˆâ–ˆâ–ˆâ–’â–‘ â–„â–„â–ˆâ–ˆâ–ˆâ–€
â–€â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–€
â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€
â–€â–€â–€â–€â–€

```
      ğŸ”¥ ä¹å°¾ãƒãƒ£ã‚¯ãƒ©ãƒ¢ãƒ¼ãƒ‰ï¼ ğŸ”¥
```

EOF
}

#=========================================================

# å…¥åŠ›å€¤æ¤œè¨¼é–¢æ•°

#=========================================================
validate_delay() {
local delay=$1
if ! [[ â€œ$delayâ€ =~ ^[0-9]+$ ]]; then
log_error â€œé…å»¶æ™‚é–“ã«ã¯æ­£ã®æ•´æ•°ã‚’æŒ‡å®šã—ã¦ãã ã•ã„: â€˜$delayâ€™â€
return 1
fi

```
if [[ $delay -lt $MIN_DELAY ]] || [[ $delay -gt $MAX_DELAY ]]; then
    log_error "é…å»¶æ™‚é–“ã¯${MIN_DELAY}ã‹ã‚‰${MAX_DELAY}ã®é–“ã§æŒ‡å®šã—ã¦ãã ã•ã„: '$delay'"
    return 1
fi

return 0
```

}

validate_repeat() {
local repeat=$1
if ! [[ â€œ$repeatâ€ =~ ^[0-9]+$ ]]; then
log_error â€œç¹°ã‚Šè¿”ã—å›æ•°ã«ã¯æ­£ã®æ•´æ•°ã‚’æŒ‡å®šã—ã¦ãã ã•ã„: â€˜$repeatâ€™â€
return 1
fi

```
if [[ $repeat -lt 1 ]] || [[ $repeat -gt 100 ]]; then
    log_error "ç¹°ã‚Šè¿”ã—å›æ•°ã¯1ã‹ã‚‰100ã®é–“ã§æŒ‡å®šã—ã¦ãã ã•ã„: '$repeat'"
    return 1
fi

return 0
```

}

#=========================================================

# ãƒ¢ãƒ¼ãƒ‰å®Ÿè¡Œé–¢æ•°

#=========================================================
execute_mode() {
local mode=$1
local repeat=${2:-1}
local delay=${3:-2}

```
for ((i=1; i<=repeat; i++)); do
    if [[ $repeat -gt 1 ]] && [[ "${SILENT:-false}" != "true" ]]; then
        echo -e "${COLOR_MAGENTA}${COLOR_BOLD}=== ç¬¬${i}å›ç›®ã®å¤‰åŒ– ===${COLOR_RESET}"
        echo ""
    fi
    
    case "$mode" in
        "normal")
            clear_screen
            draw_naruto
            ;;
        "chakra")
            clear_screen
            draw_naruto_chakra_mode
            ;;
        "kyuubi")
            clear_screen
            draw_naruto_kyuubi_mode
            ;;
        "all")
            clear_screen
            draw_naruto
            if [[ $i -lt $repeat ]] || [[ "$mode" == "all" ]]; then
                wait_with_animation "$delay" "æ¬¡ã®å¤‰åŒ–ã¾ã§å¾…æ©Ÿä¸­..."
            fi
            
            clear_screen
            draw_naruto_chakra_mode
            if [[ $i -lt $repeat ]] || [[ "$mode" == "all" ]]; then
                wait_with_animation "$delay" "æ¬¡ã®å¤‰åŒ–ã¾ã§å¾…æ©Ÿä¸­..."
            fi
            
            clear_screen
            draw_naruto_kyuubi_mode
            ;;
    esac
    
    # ç¹°ã‚Šè¿”ã—ã®é–“ã«å¾…æ©Ÿ
    if [[ $i -lt $repeat ]]; then
        wait_with_animation "$delay" "æ¬¡ã®ç¹°ã‚Šè¿”ã—ã¾ã§å¾…æ©Ÿä¸­..."
    fi
done
```

}

#=========================================================

# ãƒ¡ã‚¤ãƒ³å‡¦ç†

#=========================================================
main() {
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è¨­å®š
local mode=â€œallâ€
local delay=2
local repeat=1
local silent=false

```
# ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®å‡¦ç†
while [[ $# -gt 0 ]]; do
    case "$1" in
        -n|--normal)
            mode="normal"
            shift
            ;;
        -c|--chakra)
            mode="chakra"
            shift
            ;;
        -k|--kyuubi)
            mode="kyuubi"
            shift
            ;;
        -a|--all)
            mode="all"
            shift
            ;;
        -r|--repeat)
            if [[ -n "${2:-}" ]] && validate_repeat "$2"; then
                repeat="$2"
                shift 2
            else
                log_error "ç¹°ã‚Šè¿”ã—å›æ•°ãŒç„¡åŠ¹ã§ã™"
                return 1
            fi
            ;;
        -d|--delay)
            if [[ -n "${2:-}" ]] && validate_delay "$2"; then
                delay="$2"
                shift 2
            else
                log_error "é…å»¶æ™‚é–“ãŒç„¡åŠ¹ã§ã™"
                return 1
            fi
            ;;
        -s|--silent)
            silent=true
            export SILENT=true
            shift
            ;;
        -V|--version)
            show_version
            return 0
            ;;
        -h|--help)
            show_help
            return 0
            ;;
        *)
            log_error "ä¸æ˜ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³: '$1'"
            echo ""
            show_help
            return 1
            ;;
    esac
done

# ç«¯æœ«ã‚µã‚¤ã‚ºã®ãƒã‚§ãƒƒã‚¯
if ! check_terminal_size; then
    return 1
fi

# ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ç¤º
if [[ "$silent" != "true" ]]; then
    clear_screen
    echo -e "${COLOR_BOLD}${COLOR_CYAN}===== ã†ãšã¾ããƒŠãƒ«ãƒˆå¤‰åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ v${VERSION} =====${COLOR_RESET}"
    echo ""
    
    if [[ $repeat -gt 1 ]]; then
        log_info "${repeat}å›ç¹°ã‚Šè¿”ã—ã¾ã™"
    fi
    if [[ "$mode" == "all" ]]; then
        log_info "${delay}ç§’é–“éš”ã§ãƒ¢ãƒ¼ãƒ‰å¤‰åŒ–ã—ã¾ã™"
    fi
    echo ""
fi

# ãƒ¢ãƒ¼ãƒ‰å®Ÿè¡Œ
execute_mode "$mode" "$repeat" "$delay"

# å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
if [[ "$silent" != "true" ]]; then
    echo ""
    log_success "ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒãŒå®Œäº†ã—ã¾ã—ãŸ"
    echo -e "${COLOR_YELLOW}ã ã£ã¦ã°ã‚ˆï¼${COLOR_RESET}"
fi

return 0
```

}

#=========================================================

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ

#=========================================================
if [[ â€œ${BASH_SOURCE[0]}â€ == â€œ${0}â€ ]]; then
main â€œ$@â€
fi