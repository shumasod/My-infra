#!/bin/bash
# ANSIカラーコードの定義
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
ORANGE='\033[0;33m'
NC='\033[0m'

# カテゴリー別のダジャレ配列
declare -A dajare_categories
dajare_categories["食べ物"]=(
    "カレーは辛れー"
    "寿司を食べたらスシーンとした"
    "おにぎりの具がむにぎりと出てきた"
    "天ぷらを見てテンプレート"
    "餃子を見てギョーザムライ"
    "アイスを食べたらアイスパイス"
    "ケーキ屋でケーキイケイケ"
    "ラーメンを食べたらライメン上がった"
    "納豆がなっとうなる"
    "パンを売った店はパン屋さん"
    "ピザを食べたらピザマジ最高"
    "お茶が出てきて、おちゃめなおちゃ"
    "コーヒーを飲んだらコーヒールしました"
    "鍋をつついたらナベにょっとなった"
    "醤油を入れたらショーユーポーズ"
    "そばを食べたらそばにいた"
    "うどんを見たらう、どんなに美味しそう"
    "おでんをおでんと見た"
    "たこ焼きをたこったので焼いた"
    "チョコレートを食べたらチョコっとよくなった"
)

dajare_categories["動物"]=(
    "カエルが帰る"
    "イカれたイカ"
    "トラブルになったトラ"
    "パンダが派手"
    "ネコがねっころがった"
    "犬がいぬいた"
    "サルがさるかに大戦争"
    "キリンが着りんとした"
    "ゾウがぞうさないように歩く"
    "カモがかもしれない"
    "ペンギンがペンギンギンとした"
    "ウサギがうさんくさい"
    "クマがくまった時に助けてくれる"
    "ライオンがらいおんする"
    "コアラがこあらっぽい"
    "ハチがはちゃめちゃに飛ぶ"
    "セミがせみころんとなった"
    "カバがかばってくれた"
    "リスがりすく高い挑戦をした"
    "フクロウがふくろうに隠れた"
)

dajare_categories["日常"]=(
    "時計は時々止まる"
    "傘を差すのがさすが"
    "布団が吹っ飛んだ"
    "進むのが親むけ"
    "電話に出んわ"
    "鏡を見たら顔がかがみえた"
    "洗濯物が洗たくない"
    "ドアがドアップで映った"
    "椅子に座ったらイスタンブール"
    "テレビを見てテレビックリした"
    "窓を開けたら窓ちそうだった"
    "歯ブラシで歯を磨いたらばっちり"
    "エレベーターでエレベーあがった"
    "階段を上ったら階段だんだん疲れてきた"
    "眼鏡をかけたらメガネあった"
    "財布を落としたら財布しい気持ちになった"
    "靴を履いたら靴ずれた"
    "本を読んだら本当に感動した"
    "鍵をなくした鍵もちゃん"
    "ティッシュがティッシュー出てきた"
)

dajare_categories["季節"]=(
    "春が着るのは春着"
    "夏が来たのを夏っと見た"
    "秋の空を飽きのかない"
    "冬を踏んだ"
    "梅雨が愛むよう"
    "桜が咲くらしい"
    "紅葉を見に行ったら紅葉葉っぱしなかった"
    "台風が体を動かして近づいてくる"
    "雪が降ったら嬉しいゆき"
    "霜がおりたら早起きよそう"
    "雷がなったら来ないでくらいなのに"
    "虹が出たらにじろうとした"
    "梅の花が咲いて梅の実が生まる"
    "暑くて熱中症になったらあっとう的だ"
    "寒くてさむらいのような覚悟が必要"
    "暖かくて春がはるか遠くまで見える"
    "涼しくて水がすずしげに流れる"
    "嵐が来たらあらしたくなる"
    "霧が深くてきりきり舞いした"
    "日差しが強くてひざしっかり守らないと"
)

dajare_categories["スポーツ"]=(
    "野球選手が焼く肉"
    "サッカー選手がさっかーっと走る"
    "テニスをしてテニスネスネス"
    "バスケットでバスケット落とした"
    "ゴルフでゴルフっつぁんがホールインワン"
    "水泳で水曜日に泳いだ"
    "ボウリングのピンがびんびん倒れる"
    "卓球で卓球えいに勝った"
    "バレーボールでバレエを踊る"
    "アーチェリーでアーチ状に弓を引く"
    "マラソンで走ってマラソンそんなに大変なの"
    "スキーをしたらスキーンと冷たい"
    "スノボーをしたらスノーボードに乗るのはスノーいかん"
    "ジョギングをしたらジョギングいんぐ"
    "体操選手が体そうきれいに引き締まってる"
    "柔道選手が重度の怪我"
    "剣道の師範が剣どうにかしないと"
    "ラグビーをしてラグビービーと飛ぶ"
    "ボクシングでボクしっかり殴らないと"
    "フェンシングでフェンスしんぐー"
)

dajare_categories["職業"]=(
    "医者が医者倒れる"
    "教師が狂氏と呼ばれる"
    "弁護士が弁解したい"
    "歌手の歌朱いドレス"
    "パイロットがパイをロットで買う"
    "美容師が美様しくて"
    "消防士が焼き肉を消防"
    "警察官が警ら察知する"
    "シェフがシェフいせいよく料理する"
    "デザイナーがデザインあーと感心"
    "プログラマーがプログラマージで喜ぶ"
    "建築家の建築課せられた使命"
    "運転手が運転出来なくなった"
    "農家が農科の学校出身"
    "漁師が漁師きな漁獲高"
    "看護師が観護る"
    "俳優が背優しく演じる"
    "作家が作家ら小説を書く"
    "政治家が正義家だ"
    "宇宙飛行士が宇宙飛行しもの"
)

dajare_categories["乗り物"]=(
    "自転車で自転回る"
    "バスに乗ったらバースデーだった"
    "電車が電車らしく走る"
    "タクシーに乗ったらタクシー屋の日だった"
    "飛行機が飛行きな旅"
    "船が船だんと進む"
    "ヘリコプターがヘリこぷ"
    "モノレールがモノレアルな乗り物"
    "トラックを運転したらトラックミックス"
    "バイクに乗ったらバイキング気分"
    "新幹線が新幹なしで未来的"
    "路面電車が路面でんと走る"
    "ロケットがロケットットする"
    "潜水艦が潜水艦ど深く潜る"
    "気球が気球球と浮かぶ"
    "スケートボードがスケートボードリーム"
    "セグウェイでセグウェイウェイで移動"
    "リニアモーターカーがリニアも一台欲しい"
    "人力車を引いたら人力車好きだね"
    "ケーブルカーに乗ったらケーブルかぁー"
)

dajare_categories["場所"]=(
    "公園に行ったら公園ない"
    "図書館で図書かんだ"
    "美術館で美術観る"
    "映画館で映画感じる"
    "レストランでレストランチをした"
    "カフェでカフェいりが素晴らしい"
    "動物園で動物、ぞうだけを見た"
    "水族館で水族感じた"
    "デパートでデパートナーと買い物"
    "スタジアムでスタジアムあい見ろ"
    "空港で空港るのを見てた"
    "駅で駅きゅうに止まった"
    "城に行ったら城りょうが高かった"
    "博物館で博物かんど驚く"
    "遊園地で遊園知らなかった"
    "ホテルでホテルる暇もなかった"
    "銀行で銀行くようになった"
    "病院で病院ない方がいい"
    "ジムでジムなさり運動"
    "オフィスでオフィスいだは残業"
)

dajare_categories["IT・テクノロジー"]=(
    "パソコンでパソコんな遊びをした"
    "スマホを落としたらスマホっとした"
    "インターネットがインターねっとり遅い"
    "プリンターでプリントア"
    "Wifiがわいふぁいて速くなった"
    "USBでUSBのようにつないだ"
    "マウスがマウスムーズに動く"
    "キーボードでキーボーど音を鳴らす"
    "タブレットでタブレっと取った"
    "イヤホンしてイヤホン本当に良く聞こえる"
    "Bluetoothが青とぅーす"
    "アプリをアップりました"
    "データをデータらめたら消えた"
    "クラウドがクラウドうど空に浮かぶ"
    "プログラミングでプログラミングニャリーな人になった"
    "AIがあいうえお順に並べる"
    "仮想現実で仮想げん実にある？"
    "ハッシュタグでハッシュタグるい集めた"
    "ドローンがドローンなりに飛ぶ"
    "5Gが5Gガー速い"
)

# ダジャレ評価に応じたユーモア反応
declare -A humor_responses
humor_responses["面白い"]=(
    "さすが！ダジャレの達人ですね！"
    "あなたのセンスが光ります！"
    "そのセンス、ダジャレマスターの証です！"
    "笑いのツボを心得ていますね！"
    "ダジャレワールドへようこそ！"
    "ダジャレの神様も喜んでいるでしょう！"
    "その笑いのセンス、素晴らしい！"
    "ダジャレ星人も唸るセンスです！"
)

humor_responses["まあまあ"]=(
    "次はもっと笑えるかも！"
    "ダジャレの世界は奥が深いですね！"
    "笑いのポテンシャルを感じます！"
    "なかなかのセンスをお持ちですね！"
    "次のダジャレで大爆笑かも！"
    "ダジャレの道は続いています！"
    "まだまだダジャレの旅は始まったばかり！"
    "ダジャレの才能が開花しつつあります！"
)

humor_responses["うーん"]=(
    "すべてのダジャレが刺さるわけではありません..."
    "ダジャレの道は険しいですね"
    "笑いのツボは人それぞれ！"
    "次こそはきっと面白いのが出るはず！"
    "ダジャレの面白さは時に理解されにくいものです"
    "ダジャレマスターへの道のりは長いです..."
    "センスが合わないこともあります、次行きましょう！"
    "ダジャレの真髄はまだ見えていません！"
)

# 最後の別れの言葉
declare -a farewell_messages=(
    "また来てね！ダジャレでまた会いましょう！"
    "ダジャレで笑顔になれる日を楽しみにしています！"
    "ダジャレは世界を明るくします、また会いましょう！"
    "笑いはあなたを元気にします、また遊びに来てね！"
    "ダジャレの力で世界は平和になります、さようなら！"
    "またダジャレで笑いましょう！"
    "ダジャレ道は永遠なり、またお会いしましょう！"
    "ダジャレを忘れずに、また来てくださいね！"
    "あなたのダジャレセンスに乾杯！また会いましょう！"
    "ダジャレ魂、忘れないでくださいね！"
)

# ダジャレの説明文を表示する関数
show_dajare_info() {
    echo -e "${CYAN}===== ダジャレについて =====${NC}"
    echo -e "${YELLOW}ダジャレとは、言葉の音が似ていることを利用した日本の言葉遊びです。${NC}"
    echo -e "${YELLOW}「駄」は価値が低いことを意味し、「洒落」は言葉遊びを意味します。${NC}"
    echo -e "${YELLOW}つまり「価値の低い洒落」という意味ですが、実は奥が深いんです！${NC}"
    echo -e "${GREEN}ダジャレのコツ：${NC}"
    echo " - 音が似ている言葉を組み合わせる"
    echo " - 意外性があるほど面白くなる"
    echo " - 表情やリズムも重要！"
    echo
    echo -e "${PURPLE}エンターキーを押して戻る${NC}"
    read
}

# ダジャレを追加する関数
add_custom_dajare() {
    echo -e "${CYAN}===== オリジナルダジャレの追加 =====${NC}"
    echo -e "${YELLOW}あなたのオリジナルダジャレを追加しましょう！${NC}"
    
    # カテゴリー選択
    echo -e "${GREEN}どのカテゴリーに追加しますか？${NC}"
    categories=("食べ物" "動物" "日常" "季節" "スポーツ" "職業" "乗り物" "場所" "IT・テクノロジー")
    for i in "${!categories[@]}"; do
        echo "$((i+1))) ${categories[i]}"
    done
    echo -e "${PURPLE}カテゴリー番号を入力してください:${NC}"
    read cat_num
    
    # 入力チェック
    if ! [[ "$cat_num" =~ ^[1-9]$ ]] || [ "$cat_num" -gt "${#categories[@]}" ]; then
        echo -e "${RED}無効な選択です。メインメニューに戻ります。${NC}"
        sleep 2
        return
    fi
    
    selected_category=${categories[$((cat_num-1))]}
    
    # ダジャレの入力
    echo -e "${GREEN}あなたのオリジナルダジャレを入力してください:${NC}"
    read custom_dajare
    
    if [ -z "$custom_dajare" ]; then
        echo -e "${RED}ダジャレが入力されていません。メインメニューに戻ります。${NC}"
        sleep 2
        return
    fi
    
    # 配列に追加
    dajare_categories["$selected_category"]+=("$custom_dajare")
    
    echo -e "${GREEN}「$custom_dajare」を${YELLOW}$selected_category${GREEN}カテゴリーに追加しました！${NC}"
    sleep 2
}

# メイン関数
main() {
    clear
    echo -e "${BLUE}===== ダジャレジェネレーター =====${NC}\n"
    
    # メニューの表示
    echo -e "${GREEN}カテゴリーを選んでください：${NC}"
    echo "1) 食べ物ダジャレ"
    echo "2) 動物ダジャレ"
    echo "3) 日常ダジャレ"
    echo "4) 季節ダジャレ"
    echo "5) スポーツダジャレ"
    echo "6) 職業ダジャレ"
    echo "7) 乗り物ダジャレ"
    echo "8) 場所ダジャレ"
    echo "9) IT・テクノロジーダジャレ"
    echo "10) 全てのカテゴリーからランダム"
    echo "11) ダジャレについて"
    echo "12) オリジナルダジャレを追加"
    echo "13) 終了"
    echo
    
    read -p "選択してください (1-13): " choice
    
    case $choice in
        1) category="食べ物" ;;
        2) category="動物" ;;
        3) category="日常" ;;
        4) category="季節" ;;
        5) category="スポーツ" ;;
        6) category="職業" ;;
        7) category="乗り物" ;;
        8) category="場所" ;;
        9) category="IT・テクノロジー" ;;
        10) 
            categories=("食べ物" "動物" "日常" "季節" "スポーツ" "職業" "乗り物" "場所" "IT・テクノロジー")
            category=${categories[$RANDOM % ${#categories[@]}]}
            ;;
        11)
            show_dajare_info
            main
            return
            ;;
        12)
            add_custom_dajare
            main
            return
            ;;
        13) 
            # ランダムな別れのメッセージを表示
            random_farewell=${farewell_messages[$RANDOM % ${#farewell_messages[@]}]}
            echo -e "\n${YELLOW}$random_farewell${NC}"
            exit 0 
            ;;
        *) 
            echo -e "\n${RED}無効な選択です。もう一度試してください。${NC}"
            sleep 2
            main 
            return
            ;;
    esac
    
    # 選択されたカテゴリーからランダムにダジャレを選択
    selected_array=("${dajare_categories[$category][@]}")
    random_dajare=${selected_array[$RANDOM % ${#selected_array[@]}]}
    
    # 結果を表示（少しアニメーション効果を追加）
    clear
    echo -e "${BLUE}===== ダジャレジェネレーター =====${NC}\n"
    echo -e "${PURPLE}カテゴリー: $category${NC}"
    echo -e "${YELLOW}ダジャレを生成中...${NC}"
    sleep 1
    
    # ドラムロール風の効果
    for i in {1..3}; do
        echo -n "."
        sleep 0.3
    done
    echo
    
    # ダジャレの表示
    echo -e "\n${GREEN}━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━${NC}"
    echo -e "${YELLOW}$random_dajare${NC}"
    echo -e "${GREEN}━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━${NC}"
    
    # ダジャレの評価オプション
    echo -e "\n${CYAN}このダジャレはどうでしたか？${NC}"
    echo "1) 面白い！"
    echo "2) まあまあ"
    echo "3) うーん..."
    read -p "評価を選んでください (1-3): " rating
    
    case $rating in
        1) 
            responses=("${humor_responses["面白い"][@]}")
            random_response=${responses[$RANDOM % ${#responses[@]}]}
            echo -e "${GREEN}$random_response${NC}" 
            ;;
        2) 
            responses=("${humor_responses["まあまあ"][@]}")
            random_response=${responses[$RANDOM % ${#responses[@]}]}
            echo -e "${YELLOW}$random_response${NC}" 
            ;;
        3) 
            responses=("${humor_responses["うーん"][@]}")
            random_response=${responses[$RANDOM % ${#responses[@]}]}
            echo -e "${RED}$random_response${NC}" 
            ;;
    esac
    
    # 続行するかどうかを確認
    echo -e "\n${BLUE}もう一度ダジャレを見ますか？ (y/n)${NC}"
    read -n 1 -r answer
    echo
    if [[ $answer =~ ^[Yy]$ ]]; then
        main
    else
        # ランダムな別れのメッセージを表示
        random_farewell=${farewell_messages[$RANDOM % ${#farewell_messages[@]}]}
        echo -e "\n${YELLOW}$random_farewell${NC}"
        exit 0
    fi
}

# スクリプトを開始
main
