#!/bin/bash

# çŒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ v2.0 - æ”¹å–„ç‰ˆ
# Ctrl+C ã§çµ‚äº†ã§ãã¾ã™

# è‰²ã®å®šç¾©
if [ -t 1 ] && [ "$(tput colors 2>/dev/null || echo 0)" -ge 8 ]; then
    PINK='\033[0;35m'
    YELLOW='\033[1;33m'
    CYAN='\033[0;36m'
    WHITE='\033[1;37m'
    NC='\033[0m'
else
    PINK=''
    YELLOW=''
    CYAN=''
    WHITE=''
    NC=''
fi

# çŒ«ã®é³´ãå£°ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
cat_sounds=(
    "ã«ã‚ƒãƒ¼ï¼à¸…^â€¢ï»Œâ€¢^à¸…"
    "ã«ã‚ƒãƒ¼ã‚“â™ªà¸…(ãƒŸãƒ»ï»Œãƒ»ãƒŸ)à¸…"
    "ã¿ã‚ƒãƒ¼ï¼(=^ï½¥Ï‰ï½¥^=)"
    "ã«ã‚ƒã«ã‚ƒã£ï¼à¸…(Î¦Ï‰Î¦)à¸…"
    "ã”ã‚ã”ã‚ï½žâ™ª(â†€Ð”â†€)"
    "ã«ã‚ƒï¼Ÿ(Ð¤Ï‰Ð¤)"
    "ã«ã‚ƒãƒ¼ãŠï¼à¸…(âŒ¯Í’â€¢ Éª â€¢âŒ¯Í’)à¸…"
    "ãµã«ã‚ƒã‚ï½ž(à¹‘â†€á†ºâ†€à¹‘)"
)

# çŒ«ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
cat_actions=(
    "ðŸ¾ ã‚ãã³ã‚’ã—ã¦ã„ã¾ã™..."
    "ðŸ’¤ ãŠæ˜¼å¯ã‚¿ã‚¤ãƒ ã§ã™..."
    "ðŸš ã”ã¯ã‚“ãŒæ¬²ã—ã„ã¿ãŸã„..."
    "ðŸŽ¾ éŠã³ãŸã„ã¿ãŸã„..."
    "âœ¨ æ¯›ã¥ãã‚ã„ä¸­..."
    "ðŸ‘€ çª“ã®å¤–ã‚’è¦‹ã¦ã„ã¾ã™..."
    "ðŸ“¦ ç®±ã®ä¸­ã«å…¥ã‚Šã¾ã—ãŸ..."
    "ðŸŒ™ å¤œã®ãƒ‘ãƒˆãƒ­ãƒ¼ãƒ«ä¸­..."
)

# ãƒˆãƒ©ãƒƒãƒ—è¨­å®šï¼ˆCtrl+C ã§çµ‚äº†æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
trap 'echo -e "\n${PINK}ã¾ãŸã«ã‚ƒãƒ¼ï¼à¸…^â€¢ï»Œâ€¢^à¸…${NC}"; exit 0' INT TERM

# ãƒ¢ãƒ¼ãƒ‰é¸æŠž
echo -e "${YELLOW}=== çŒ«ãƒ¢ãƒ¼ãƒ‰é¸æŠž ===${NC}"
echo "1) ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆå…ƒã®ã¾ã¾ï¼‰"
echo "2) ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ã"
echo "3) ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä»˜ã"
echo "4) ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³"
echo "5) ãƒ©ãƒ³ãƒ€ãƒ é–“éš”"
echo ""
read -p "ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠž (1-5, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2): " mode
mode=${mode:-2}

# é–“éš”è¨­å®š
case $mode in
    4) interval=3 ;;
    *) interval=1 ;;
esac

# ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
count=0

echo -e "\n${CYAN}çŒ«ãŒé³´ãå§‹ã‚ã¾ã—ãŸï¼ (Ctrl+C ã§çµ‚äº†)${NC}\n"

# ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
while true; do
    count=$((count + 1))
    
    case $mode in
        1)
            # ã‚·ãƒ³ãƒ—ãƒ«ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…ƒã®ã¾ã¾ï¼‰
            echo "ã«ã‚ƒãƒ¼ï¼à¸…^â€¢ï»Œâ€¢^à¸…"
            ;;
        2)
            # ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ã
            sound=${cat_sounds[$RANDOM % ${#cat_sounds[@]}]}
            echo -e "${PINK}$sound${NC}"
            ;;
        3)
            # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä»˜ã
            sound=${cat_sounds[$RANDOM % ${#cat_sounds[@]}]}
            action=${cat_actions[$RANDOM % ${#cat_actions[@]}]}
            echo -e "${PINK}$sound${NC}"
            if [ $((count % 5)) -eq 0 ]; then
                echo -e "${WHITE}$action${NC}"
            fi
            ;;
        4)
            # ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³
            sound=${cat_sounds[$RANDOM % ${#cat_sounds[@]}]}
            echo -e "${PINK}$sound${NC}"
            echo -e "${WHITE}ï¼ˆã‚†ã£ãŸã‚Šãƒ¢ãƒ¼ãƒ‰ï¼‰${NC}"
            ;;
        5)
            # ãƒ©ãƒ³ãƒ€ãƒ é–“éš”
            sound=${cat_sounds[$RANDOM % ${#cat_sounds[@]}]}
            echo -e "${PINK}$sound${NC}"
            interval=$(( (RANDOM % 3) + 1 ))
            ;;
    esac
    
    # 10å›žã”ã¨ã«çŒ«ã®ã‚¢ã‚¹ã‚­ãƒ¼ã‚¢ãƒ¼ãƒˆè¡¨ç¤º
    if [ $((count % 10)) -eq 0 ]; then
        echo -e "${YELLOW}"
        echo "     /\\_/\\"
        echo "    ( o.o )"
        echo "     > ^ <"
        echo -e "${NC}"
        echo -e "${CYAN}${count}å›ž é³´ãã¾ã—ãŸï¼${NC}"
    fi
    
    sleep "$interval"
done
