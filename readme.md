# NetShark - Wiresharké¢¨ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ„ãƒ¼ãƒ«

ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä½œæˆã—ãŸWiresharkãƒ©ã‚¤ã‚¯ãªãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»è§£æãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ç‰¹å¾´

- ğŸ” ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£
- ğŸ¨ ãƒ—ãƒ­ãƒˆã‚³ãƒ«åˆ¥ã®è‰²åˆ†ã‘è¡¨ç¤º
- ğŸ“Š ã‚­ãƒ£ãƒ—ãƒãƒ£çµ±è¨ˆã®è‡ªå‹•ç”Ÿæˆ
- ğŸ” è©³ç´°ãªãƒ‘ã‚±ãƒƒãƒˆè§£æ
- ğŸ’¾ Pcapãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- ğŸ¯ BPFãƒ•ã‚£ãƒ«ã‚¿ã‚µãƒãƒ¼ãƒˆ

## å¿…è¦ãªç’°å¢ƒ

- Linux OS (Ubuntu, CentOS, etc.)
- rootæ¨©é™
- tcpdump
- tshark (wireshark-common)

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install tcpdump wireshark-common
```

**CentOS/RHEL:**
```bash
sudo yum install tcpdump wireshark
```

**macOS:**
```bash
brew install wireshark
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
# ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å¯¾è©±çš„ã«é¸æŠ
sudo ./netshark.sh

# ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒ‡å®š
sudo ./netshark.sh -i eth0

# ãƒ•ã‚£ãƒ«ã‚¿ã‚’æŒ‡å®šã—ã¦HTTPãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ã¿ã‚­ãƒ£ãƒ—ãƒãƒ£
sudo ./netshark.sh -i eth0 -f "port 80"

# 100ãƒ‘ã‚±ãƒƒãƒˆã®ã¿ã‚­ãƒ£ãƒ—ãƒãƒ£
sudo ./netshark.sh -i eth0 -c 100

# ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®š
sudo ./netshark.sh -i eth0 -w my_capture.pcap
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ |
|-----------|------|
| `-i <interface>` | ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |
| `-f <filter>` | BPFãƒ•ã‚£ãƒ«ã‚¿å¼ |
| `-c <count>` | ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ãƒ‘ã‚±ãƒƒãƒˆæ•° |
| `-w <file>` | å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«å |
| `-h` | ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º |

### BPFãƒ•ã‚£ãƒ«ã‚¿ã®ä¾‹

```bash
# HTTP/HTTPS ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯
sudo ./netshark.sh -i eth0 -f "port 80 or port 443"

# ç‰¹å®šã®ãƒ›ã‚¹ãƒˆã¨ã®é€šä¿¡
sudo ./netshark.sh -i eth0 -f "host 8.8.8.8"

# TCPé€šä¿¡ã®ã¿
sudo ./netshark.sh -i eth0 -f "tcp"

# UDPãƒãƒ¼ãƒˆ53 (DNS)
sudo ./netshark.sh -i eth0 -f "udp port 53"

# ç‰¹å®šã®ã‚µãƒ–ãƒãƒƒãƒˆ
sudo ./netshark.sh -i eth0 -f "net 192.168.1.0/24"

# ICMPãƒ‘ã‚±ãƒƒãƒˆ
sudo ./netshark.sh -i eth0 -f "icmp"

# è¤‡åˆãƒ•ã‚£ãƒ«ã‚¿
sudo ./netshark.sh -i eth0 -f "host 192.168.1.1 and port 443"
```

## æ©Ÿèƒ½è©³ç´°

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚­ãƒ£ãƒ—ãƒãƒ£

ãƒ‘ã‚±ãƒƒãƒˆã‚’è‰²åˆ†ã‘ã—ã¦è¡¨ç¤º:
- ğŸ”µ **é’**: TCPãƒ‘ã‚±ãƒƒãƒˆ
- ğŸŸ¢ **ç·‘**: UDPãƒ‘ã‚±ãƒƒãƒˆ
- ğŸŸ¡ **é»„**: ICMPãƒ‘ã‚±ãƒƒãƒˆ
- ğŸŸ£ **ç´«**: ARPãƒ‘ã‚±ãƒƒãƒˆ

### çµ±è¨ˆæƒ…å ±

ã‚­ãƒ£ãƒ—ãƒãƒ£çµ‚äº†æ™‚ã«ä»¥ä¸‹ã®çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º:

1. **åŸºæœ¬æƒ…å ±**
   - ãƒ‘ã‚±ãƒƒãƒˆæ•°
   - ã‚­ãƒ£ãƒ—ãƒãƒ£æ™‚é–“
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º

2. **ãƒ—ãƒ­ãƒˆã‚³ãƒ«åˆ†å¸ƒ**
   - å„ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä½¿ç”¨ç‡

3. **ãƒˆãƒƒãƒ—10ã®é€ä¿¡å…ƒIP**
4. **ãƒˆãƒƒãƒ—10ã®å®›å…ˆIP**
5. **ãƒˆãƒƒãƒ—10ã®ãƒãƒ¼ãƒˆç•ªå·**

### è©³ç´°è§£æ

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ã®è©³ç´°è§£æã‚’å®Ÿè¡Œ:

- HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§
- DNSã‚¯ã‚¨ãƒªä¸€è¦§
- TLS/SSLæ¥ç¶šæƒ…å ±

## å®Ÿè¡Œä¾‹

### ä¾‹1: Webãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ç›£è¦–

```bash
sudo ./netshark.sh -i eth0 -f "port 80 or port 443"
```

### ä¾‹2: DNSã‚¯ã‚¨ãƒªã®ç›£è¦–

```bash
sudo ./netshark.sh -i eth0 -f "udp port 53"
```

### ä¾‹3: ç‰¹å®šãƒ›ã‚¹ãƒˆã¨ã®é€šä¿¡ã‚’100ãƒ‘ã‚±ãƒƒãƒˆå–å¾—

```bash
sudo ./netshark.sh -i eth0 -f "host 192.168.1.100" -c 100
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### "Permission denied" ã‚¨ãƒ©ãƒ¼

```bash
# sudoã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
sudo ./netshark.sh -i eth0
```

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä¸€è¦§ã‚’ç¢ºèª
ip link show

# ã¾ãŸã¯
ifconfig -a
```

### tcpdump/tsharkãŒè¦‹ã¤ã‹ã‚‰ãªã„

å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„:

```bash
# Ubuntu/Debian
sudo apt-get install tcpdump wireshark-common

# CentOS/RHEL
sudo yum install tcpdump wireshark
```

## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸãƒ‘ã‚±ãƒƒãƒˆã¯æ¨™æº–ã®pcapå½¢å¼ã§ä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã§é–‹ã‘ã¾ã™:

- Wireshark
- tcpdump
- tshark
- ãã®ä»–pcapäº’æ›ãƒ„ãƒ¼ãƒ«

```bash
# Wiresharkã§é–‹ã
wireshark netshark_capture.pcap

# tcpdumpã§èª­ã‚€
tcpdump -r netshark_capture.pcap

# tsharkã§è§£æ
tshark -r netshark_capture.pcap
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã™ã‚‹æ³¨æ„

- ã“ã®ãƒ„ãƒ¼ãƒ«ã¯rootæ¨©é™ãŒå¿…è¦ã§ã™
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã«ã¯æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ã«ã¯æ³¨æ„ã—ã¦ãã ã•ã„
- è‡ªåˆ†ãŒç®¡ç†ã™ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã®ã¿ä½¿ç”¨ã—ã¦ãã ã•ã„
- æ³•å¾‹ã‚’éµå®ˆã—ã¦ãã ã•ã„

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œè€…

Created for network analysis and troubleshooting purposes.

## å‚è€ƒè³‡æ–™

- [Wiresharkå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.wireshark.org/docs/)
- [tcpdump man page](https://www.tcpdump.org/manpages/tcpdump.1.html)
- [BPFæ§‹æ–‡ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://biot.com/capstats/bpf.html)
